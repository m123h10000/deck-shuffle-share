<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Deck Shuffle Share - Claimed Decks</title>
<style>
  body { font-family: Arial, sans-serif; max-width: 800px; margin: auto; padding: 20px; }
  table { width: 100%; border-collapse: collapse; margin-top: 20px; }
  th, td { border: 1px solid #ccc; padding: 8px; text-align: left; font-family: monospace; }
  th { background: #eee; }
</style>
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
  import {
    getDatabase,
    ref,
    get,
    child
  } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-database.js";

  const firebaseConfig = {
    apiKey: "AIzaSyBjsJu63FalxTjNrrK3ihgscKRo57Tiznc",
    authDomain: "deck-shuffle-share.firebaseapp.com",
    databaseURL: "https://deck-shuffle-share-default-rtdb.firebaseio.com",
    projectId: "deck-shuffle-share",
    storageBucket: "deck-shuffle-share.firebasestorage.app",
    messagingSenderId: "836908034519",
    appId: "1:836908034519:web:6925418aa1b3c510100392"
  };

  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);

  async function loadDecks() {
    const decksRef = ref(db, 'decks');
    try {
      const snapshot = await get(decksRef);
      if (!snapshot.exists()) {
        document.getElementById('deckList').textContent = 'No decks found.';
        return;
      }
      const decks = snapshot.val();
      const tbody = document.getElementById('deckBody');
      tbody.innerHTML = '';
      for (const [deckStr, claimCount] of Object.entries(decks)) {
        const tr = document.createElement('tr');
        const tdDeck = document.createElement('td');
        tdDeck.textContent = deckStr;
        const tdCount = document.createElement('td');
        tdCount.textContent = claimCount;
        tr.appendChild(tdDeck);
        tr.appendChild(tdCount);
        tbody.appendChild(tr);
      }
    } catch (e) {
      console.error(e);
      document.getElementById('deckList').textContent = 'Error loading decks.';
    }
  }

  window.addEventListener('DOMContentLoaded', () => {
    loadDecks();
  });
</script>
</head>
<body>
<h1>Deck Shuffle Share - Claimed Decks</h1>
<table>
  <thead>
    <tr><th>Deck (52 cards)</th><th>Claims</th></tr>
  </thead>
  <tbody id="deckBody"></tbody>
</table>
<div id="deckList"></div>
</body>
</html>
